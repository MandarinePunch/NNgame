<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Support">

	<!-- qna board의 모든 list불러옴 -->
	<select id="getSupportList" resultType="SupportDTO">
		SELECT * FROM SUPPORT ORDER BY SUPPORT_NUM DESC
	</select>
	
	<!-- qna board의 모든 list의 개수를 불러옴 -->
	<select id="getSupportCount" resultType="_int">
		SELECT count(*) FROM SUPPORT
	</select>
	
	<!-- support_writer 컬럼 추가 요함
	<select id="getUserName" resultType="string">
		SELECT u.USER_NICKNAME
		FROM SUPPORT s JOIN USERINFO u
		ON s.USER_NUM = u.USER_NUM
		ORDER BY SUPPORT_NUM DESC
	</select>
	 -->
	 
	<!-- qna board 글 상세 목록 조회 -->
	<select id="getOneWriting" parameterType="string" resultType="SupportDTO">
		SELECT * FROM SUPPORT WHERE SUPPORT_NUM = #{support_num}
	</select>
	
	<!-- 글 삽입(실제 user_num 필요) -->
	<insert id="insertBoard" parameterType="SupportDTO">
		INSERT INTO SUPPORT
		VALUES (#{support_num}, #{support_type}, #{support_title}, #{support_content}, #{support_date}, #{support_result}, #{user_num})
	</insert>
	
	<!-- 글 삭제 -->
	<delete id="deleteBoard" parameterType="string">
		DELETE FROM SUPPORT WHERE SUPPORT_NUM = #{support_num}
	</delete>
	
	<!-- 글 업데이트 -->
	<update id="updateBoard" parameterType="SupportDTO">
		UPDATE SUPPORT
		SET SUPPORT_TYPE = #{support_type}, SUPPORT_TITLE = #{support_title}, SUPPORT_CONTENT = #{support_content}
		WHERE SUPPORT_NUM = #{support_num}
	</update>
	
</mapper>
